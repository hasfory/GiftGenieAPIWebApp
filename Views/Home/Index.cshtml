@{
    ViewData["Title"] = "Welcome";
    bool isGuest = !User.Identity.IsAuthenticated;
}

<link rel="stylesheet" href="~/css/index.css" />

<div class="hero-container">
    <div class="hero-left">
        <h1 class="project-title">Welcome to <span class="brand">GiftGenie</span></h1>
        <p class="project-desc">
            Plan, share and receive the perfect gifts — all in one place.
        </p>
    </div>

    <div class="hero-right vert-stack">
        @* Показываем кнопки Register и Log In только гостям *@
        <a id="btn-register" class="btn green-outline big @(isGuest ? "" : "hidden")" href="#register-panel">Register</a>
        <a id="btn-login" class="btn pink-outline big @(isGuest ? "" : "hidden")" href="#login-panel">Log&nbsp;In</a>

        @* Показываем кнопки Search users і View my wishlists тільки авторизованим *@
        <a class="btn pink-outline big @(isGuest ? "hidden" : "")" href="/Users/Search">Search users</a>
        <a class="btn green-outline big @(isGuest ? "hidden" : "")" href="/Wishlist/UserLists">View my wishlists</a>
    </div>
</div>

@if (isGuest)
{
    <div id="login-panel" class="slide-panel">
        <h3 class="panel-title">Log In</h3>
        <form action="/Account/Login" method="post" class="panel-form">
            @Html.AntiForgeryToken()
            <input class="form-input" name="Username" placeholder="Username" required />
            <input class="form-input" name="Password" type="password" placeholder="Password" required />
            <button type="submit" class="btn green big w-100">Submit</button>
        </form>
    </div>

    <div id="register-panel" class="slide-panel">
        <h3 class="panel-title">Register</h3>
        <form action="/Account/Register" method="post" class="panel-form">
            @Html.AntiForgeryToken()
            <input class="form-input" name="Username" placeholder="Username" required />
            <input class="form-input" name="FullName" placeholder="Full Name" required />
            <input class="form-input" name="Birthdate" type="date" required />
            <input class="form-input" name="Password" type="password" placeholder="Password" required />
            <input class="form-input" name="ConfirmPassword" type="password" placeholder="Confirm Password" required />
            <button class="btn pink big w-100" type="submit">Create account</button>
        </form>
    </div>
}

@section Scripts {
    @if (isGuest)
    {
        <script>
            const loginBtn    = document.getElementById('btn-login');
            const registerBtn = document.getElementById('btn-register');
            const loginPanel  = document.getElementById('login-panel');
            const regPanel    = document.getElementById('register-panel');

            loginBtn?.addEventListener('click', e => {
                e.preventDefault();
                regPanel.classList.remove('open');
                loginPanel.classList.toggle('open');
                loginPanel.scrollIntoView({ behavior: 'smooth', block: 'center' });
            });

            registerBtn?.addEventListener('click', e => {
                e.preventDefault();
                loginPanel.classList.remove('open');
                regPanel.classList.toggle('open');
                regPanel.scrollIntoView({ behavior: 'smooth', block: 'center' });
            });
        </script>
    }
}
